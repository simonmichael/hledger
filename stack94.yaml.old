# stack build plan using GHC 9.4.8
# Note hledger now officially requires GHC 9.6+;
# this is here as a reference in case you are trying to build with older GHC and stack.

resolver: lts-21.25

packages:
- hledger-lib
- hledger
- hledger-ui
- hledger-web

extra-deps:
- brick-2.3.1
- encoding-0.10
- hashtables-1.4.2
- fsnotify-0.4.2.0
- hfsevents-0.1.8
- safe-0.3.21
- vty-6.2
- vty-crossplatform-0.4.0.0
- vty-unix-0.2.0.0
- vty-windows-0.2.0.2

nix:
  pure: false
  packages: [perl gmp ncurses zlib]


# ghc-options:
#   "$locals": -fplugin Debug.Breakpoint

# # for precise profiling, per https://www.tweag.io/posts/2020-01-30-haskell-profiling.html:
# # apply-ghc-options: everything
# # rebuild-ghc-options: true
# # stack build --profile --ghc-options="-fno-prof-auto"

# # tell GHC to write hie files, eg for weeder. Rumoured to be slow.
# # ghc-options:
# #   "$locals": -fwrite-ide-info

# # ghc-options:
# #   "$locals": -ddump-timings
# #  "$targets": -Werror
# #  "$everything": -O2
# #  some-package: -DSOME_CPP_FLAG
