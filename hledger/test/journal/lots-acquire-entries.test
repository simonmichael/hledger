# Testing lot acquisition journal entry variations, systematically.

# * Acquire

# ** With commodity/account not declared lotful

# *** 1. acquire: bare, asset, non-lotful commodity/account
<
2026-01-01 buy
    assets:broker    10 AAPL
    assets:cash     -$500

$ hledger -f- print --lots --verbose-tags
2026-01-01 buy
    assets:broker         10 AAPL
    assets:cash             $-500

>=

# *** 2. acquire: @ $50, asset, non-lotful commodity/account
<
2026-01-01 buy
    assets:broker    10 AAPL @ $50
    assets:cash     -$500

$ hledger -f- print --lots --verbose-tags
2026-01-01 buy
    assets:broker    10 AAPL @ $50
    assets:cash              $-500

>=

# *** 3. acquire: {$50}, non-asset, non-lotful commodity/account
<
2026-01-01 buy
    equity:opening    10 AAPL {$50}
    assets:cash      -$500

$ hledger -f- print --lots --verbose-tags
2026-01-01 buy
    equity:opening    10 AAPL {$50}
    assets:cash               $-500

>=

# *** 4. acquire: {$50}, asset, non-lotful commodity/account
<
2026-01-01 buy
    assets:broker    10 AAPL {$50}
    assets:cash     -$500

$ hledger -f- print --lots --verbose-tags
2026-01-01 buy
    assets:broker:{2026-01-01, $50}    10 AAPL {$50}  ; ptype: acquire
    assets:cash                                $-500

>=

# ** With lotful commodity/account

# *** 5. acquire: bare
<
commodity AAPL  ; lots:
2026-01-01 buy
    assets:broker    10 AAPL
    assets:cash     -$500

$ hledger -f- print --lots --verbose-tags
2026-01-01 buy
    assets:broker         10 AAPL
    assets:cash             $-500

>=

# *** 6. acquire: @ $50, no {}
<
commodity AAPL  ; lots:
2026-01-01 buy
    assets:broker    10 AAPL @ $50
    assets:cash     -$500

$ hledger -f- print --lots --verbose-tags
2026-01-01 buy
    assets:broker    10 AAPL @ $50
    assets:cash              $-500

>=

# *** 7. acquire: @@ $500, no {}
<
commodity AAPL  ; lots:
2026-01-01 buy
    assets:broker    10 AAPL @@ $500
    assets:cash     -$500

$ hledger -f- print --lots --verbose-tags
2026-01-01 buy
    assets:broker    10 AAPL @@ $500
    assets:cash                $-500

>=

# *** 8. acquire: {}
<
commodity AAPL  ; lots:
2026-01-01 buy
    assets:broker    10 AAPL {}
    assets:cash     -$500

$ hledger -f- print --lots --verbose-tags
>2 /acquire posting has no lot cost/
>=1

# *** 9. acquire: {} @ $50
<
commodity AAPL  ; lots:
2026-01-01 buy
    assets:broker    10 AAPL {} @ $50
    assets:cash     -$500

$ hledger -f- print --lots --verbose-tags
>2 /acquire posting has no lot cost/
>=1

# *** 10. acquire: {$50}
<
commodity AAPL  ; lots:
2026-01-01 buy
    assets:broker    10 AAPL {$50}
    assets:cash     -$500

$ hledger -f- print --lots --verbose-tags
2026-01-01 buy
    assets:broker:{2026-01-01, $50}    10 AAPL {$50}  ; ptype: acquire
    assets:cash                                $-500

>=

# *** 11. acquire: {$50} @ $50
<
commodity AAPL  ; lots:
2026-01-01 buy
    assets:broker    10 AAPL {$50} @ $50
    assets:cash     -$500

$ hledger -f- print --lots --verbose-tags
2026-01-01 buy
    assets:broker:{2026-01-01, $50}    10 AAPL {$50} @ $50  ; ptype: acquire
    assets:cash                                      $-500

>=

# *** 12. acquire: {$50} @@ $500
<
commodity AAPL  ; lots:
2026-01-01 buy
    assets:broker    10 AAPL {$50} @@ $500
    assets:cash     -$500

$ hledger -f- print --lots --verbose-tags
2026-01-01 buy
    assets:broker:{2026-01-01, $50}    10 AAPL {$50} @@ $500  ; ptype: acquire
    assets:cash                                        $-500

>=

# *** 13. acquire: {$50}, inferred cash amount
<
commodity AAPL  ; lots:
2026-01-01 buy
    assets:broker    10 AAPL {$50}
    assets:cash

$ hledger -f- print --lots --verbose-tags
2026-01-01 buy
    assets:broker:{2026-01-01, $50}    10 AAPL {$50}  ; ptype: acquire
    assets:cash

>=
