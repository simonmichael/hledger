# * check accounts
# ** 1. check accounts succeeds when all accounts are declared
<
account a
2020-01-01
  (a)  1
$ hledger -f- check accounts

# ** 2. and otherwise fails:
<
2020-01-01
  (a)  1
$ hledger -f- check accounts
>2 /account "a" has not been declared/
>=1

# ** 3. also fails for forecast accounts
<
commodity $
account a
~ 2022-01-31
    a  $1
    b

$ hledger -f- --today 2022-01-01 --forecast check accounts
>2 /account "b" has not been declared/
>=1

# ** 4. also fails in --strict mode
$ hledger -f- --today 2022-01-01 --forecast --strict bal
>2 /account "b" has not been declared/
>=1

# ** 5. also fails for auto accounts
<
commodity $
account a

= a
  (b)    $1

2022-01-31
    (a)  $1

2022-02-01
$ hledger -f- --auto check accounts
>2 /account "b" has not been declared/
>=1

# ** 6. also fails in --strict mode
$ hledger -f- --auto --strict bal
>2 /account "b" has not been declared/
>=1

# ** 7. The default equity:conversion account used by --infer-equity does not need to be declared for check accounts.
<
account a
account b

2024-01-01
    a    1A
    b   -1B

$ hledger -f- check accounts --infer-equity

# ** 8. It does not need to be declared, even without --infer-equity, and even if a different conversion account is declared. (For simplicity.)
<
account a
account b
account equity  ; type:V

2024-01-01
    a    1A
    b   -1B
    equity:conversion   0

$ hledger -f- check accounts
